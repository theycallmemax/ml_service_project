# Бэкенд-сервис

## Обзор

Бэкенд-сервис представляет собой REST API, созданный с использованием FastAPI, который служит центральным компонентом проекта ML Service. Он управляет учетными записями пользователей, ML-моделями и запросами на предсказания, соединяя фронтенд-приложение с ML-сервисом.

## Функции

- **Аутентификация пользователей**: Регистрация, вход и аутентификация на основе токенов
- **Управление моделями**: Отслеживание и управление доступными ML-моделями
- **Обработка предсказаний**: Обработка запросов на предсказания и сохранение результатов
- **Система очередей**: Асинхронная обработка запросов на предсказания с использованием Redis
- **Интеграция с базой данных**: PostgreSQL для хранения данных

## Технологический стек

- **Фреймворк**: FastAPI
- **База данных**: PostgreSQL
- **Очередь**: Redis
- **Аутентификация**: JWT

## Структура

```
backend/
├── app/
│   ├── api/             # API эндпоинты
│   ├── auth/            # Логика аутентификации
│   ├── core/            # Основные конфигурации
│   ├── database/        # Подключение к базе данных и модели
│   ├── models/          # Модели данных
│   ├── queue/           # Redis очередь для асинхронной обработки
│   ├── schemas/         # Pydantic схемы для валидации
│   ├── utils/           # Вспомогательные функции
│   └── main.py          # Точка входа в приложение
├── poetry.lock          # Файл фиксации зависимостей Poetry
└── pyproject.toml       # Конфигурация проекта
```

## API Эндпоинты

API включает следующие основные маршруты:

- `/api/v1/users/` - Управление пользователями
- `/api/v1/models/` - Управление ML-моделями
- `/api/v1/predictions/` - Создание предсказаний и история

## Разработка

### Предварительные требования

- Python 3.8+
- Poetry
- PostgreSQL
- Redis

### Настройка

```bash
# Установка зависимостей
cd backend
poetry install

# Настройка переменных окружения (см. .env.example)

# Запуск приложения
poetry run uvicorn app.main:app --reload
```

## Docker

Сервис контейнеризирован и может быть запущен с использованием Docker и docker-compose. См. README корневого проекта для инструкций.

## Документация API

При работе API документация доступна по адресу:

- Swagger UI: `/docs`
- ReDoc: `/redoc`